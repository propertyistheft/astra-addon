!function(){var e;"undefined"!=typeof astra&&(AstraProQuickView={stick_add_to_cart:astra.shop_quick_view_stick_cart,auto_popup_height_by_image:astra.shop_quick_view_auto_height,init:function(){this._init_popup(),this._bind()},_init_popup:function(){var e=parseFloat(window.innerWidth)-120,t=parseFloat(window.innerHeight)-120;const i=document.getElementById("ast-quick-view-content");i&&(i.style.maxWidth=e+"px",i.style.maxHeight=t+"px");let c=document.querySelectorAll(".ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link");0<c.length&&c.forEach(e=>{e.setAttribute("href","javascript:void(0)")})},_bind:function(){let e=document.querySelectorAll(".ast-quick-view-button, .ast-quick-view-text, .ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link, .ast-quick-view-trigger"),t=(0<e.length&&e.forEach(e=>{e.removeEventListener("click",AstraProQuickView._open_quick_view),e.addEventListener("click",AstraProQuickView._open_quick_view)}),document.querySelector("#ast-quick-view-close")),i=document.querySelector(".ast-content-main-wrapper");t&&t.addEventListener("click",AstraProQuickView._close_quick_view),i&&i.addEventListener("click",AstraProQuickView._close_quick_view_on_overlay_click),document.addEventListener("keyup",AstraProQuickView._close_quick_view_on_esc_keypress)},_open_quick_view:function(e){e.preventDefault();let t=e.currentTarget,i=t.closest("li.product"),c=document.querySelector("#ast-quick-view-modal"),o=document.querySelector(".ast-quick-view-bg"),a=t.getAttribute("data-product_id"),r=(i&&i.classList.contains("ast-qv-on-image-click")&&(a=i.querySelector(".ast-quick-view-data").getAttribute("data-product_id")),c&&!c.classList.contains("loading")&&c.classList.add("loading"),o&&!o.classList.contains("ast-quick-view-bg-ready")&&o.classList.add("ast-quick-view-bg-ready"),document.dispatchEvent(new Event("ast_quick_view_loading")),new XMLHttpRequest);r.open("POST",astra.ajax_url,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send("action=ast_load_product_quick_view&product_id= "+a),r.responseType="text",r.onreadystatechange=function(){var e=r.responseText;if(r.readyState==XMLHttpRequest.DONE&&(200<=r.status||400<=r.status)){const t=document.querySelector("#ast-quick-view-modal");t.querySelector("#ast-quick-view-content").innerHTML=e,AstraProQuickView._after_markup_append_process()}}},_after_markup_append_process:function(){let e=document.querySelector("#ast-quick-view-modal"),c=e.querySelector("#ast-quick-view-content"),t=c.querySelectorAll(".variations_form");if(e&&!e.classList.contains("open")){let e=c.outerHeight,t=window.innerHeight,i=document.querySelector("html");t<e?i.style.marginRight=AstraProQuickView._get_scrollbar_width():(i.style.marginRight="",i.querySelector(".ast-sticky-active")&&(i.querySelector(".ast-sticky-active").style.maxWidth="100%"),i.querySelector(".ast-header-sticky-active")&&(i.querySelector(".ast-header-sticky-active").style.maxWidth="100%"),i.querySelector(".ast-custom-footer")&&(i.querySelector(".ast-custom-footer").style.maxWidth="100%")),i.classList.add("ast-quick-view-is-open")}0<t.length&&(t.trigger("check_variations"),t.trigger("reset_image"),t.wc_variation_form(),t.querySelector("select").change());const i=e.querySelector(".ast-qv-image-slider");1<i.querySelector("li").length&&i.flexslider(),setTimeout(function(){AstraProQuickView._auto_set_content_height_by_image(),e.classList.remove("loading"),e.classList.add("open"),document.querySelector(".ast-quick-view-bg").classList.add("open")},100),document.dispatchEvent(new Event("ast_quick_view_loader_stop"))},_auto_set_content_height_by_image:function(){imagesLoaded(document.querySelector("#ast-quick-view-modal"),function(){let t=document.getElementById("ast-quick-view-modal"),i=t.querySelector(".woocommerce-product-gallery__image img").getBoundingClientRect().height,c=t.querySelector(".product .summary.entry-summary");var o=t.querySelectorAll(".woocommerce-product-gallery__image img, .ast-qv-slides img");let a=parseFloat(window.innerHeight)-120;if(i=parseFloat(i),AstraProQuickView.auto_popup_height_by_image?o.length?i<a?c.style.maxHeight=parseFloat(i)+"px":c.style.maxHeight=a+"px":c.style.width="100%":c.style.maxHeight=parseFloat(a)+"px",AstraProQuickView.stick_add_to_cart){t.classList.add("stick-add-to-cart");o=t.querySelector(".cart").getBoundingClientRect().height;let e=parseFloat(a)-parseFloat(o);o<i?(t.querySelector(".cart").classList.add("stick"),a=document.querySelector("#ast-quick-view-content").getBoundingClientRect().height,o=t.querySelector(".cart").getBoundingClientRect().height,e=parseFloat(a)-parseFloat(o),c.style.maxHeight=parseFloat(e)+"px"):a>e?c.style.maxHeight=parseFloat(a)+"px":c.style.maxHeight=""}})},_close_quick_view_on_esc_keypress:function(e){27===e.keyCode&&AstraProQuickView._close_quick_view()},_close_quick_view:function(e){e&&e.preventDefault(),document.querySelector(".ast-quick-view-bg").classList.remove("ast-quick-view-bg-ready"),document.querySelector("#ast-quick-view-modal").classList.remove("open","loading"),document.querySelector(".ast-quick-view-bg").classList.remove("open"),document.querySelector("html").classList.remove("ast-quick-view-is-open"),document.querySelector("html").style.marginRight="",setTimeout(function(){document.querySelector("#ast-quick-view-modal").querySelector("#ast-quick-view-content").innerHTML=""},600)},_close_quick_view_on_overlay_click:function(e){this===e.target&&AstraProQuickView._close_quick_view()},_get_scrollbar_width:function(){const e=document.createElement("div"),t=(e.classList.add("ast-get-scrollbar-width"),e.style.width="50px",e.style.height="50px",e.style.overflow="hidden",e.style.position="absolute",e.style.top="-200px",e.style.left="-200px",document.createElement("div"));t.style.height="100px",e.appendChild(t),document.querySelector("body").appendChild(e);var i=document.querySelector(".ast-get-scrollbar-width").clientWidth,c=(e.style.overflowY="scroll",document.querySelector(".ast-get-scrollbar-width").clientWidth);return document.querySelector(".ast-get-scrollbar-width").remove(),i-c}},e=function(){AstraProQuickView.init()},"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e))}();