function twoStepModernCheckout(e){e.preventDefault();var t=document.querySelectorAll(".ast-embed-checkout-form-steps .steps");const o="ast-current";var c="step-one",r="step-two",s=document.querySelector(".ast-two-step-wrap"),l=document.querySelector(".ast-embed-checkout-form-steps .steps.ast-current"),a=e.currentTarget.querySelector("a");l&&l.classList.remove(o),a&&s&&(l=s.querySelector(".woocommerce"),s=a.getAttribute("href"),a=document.querySelector(".ast-embed-checkout-form-steps .step-two"),t.forEach(e=>{e.classList.remove(o)}),"#customer_details"===s&&l?(l.classList.remove(r),l.classList.add(c),e.currentTarget.classList.add(o)):"#ast-order-wrap"===s&&l&&(l.classList.remove(c),l.classList.add(r),a.classList.add(o)))}function validateInputs(e){let s=!0,l=!1;return e.forEach(t=>{var o=t.getAttribute("type"),c=t.closest(".form-row");if(c){var r=c.querySelector(".select2"),r=c&&r?c.querySelector(".select2-selection__rendered").getAttribute("title"):t.value?t.value.trim():"";let e="";c.classList.contains("validate-required")&&("checkbox"===o&&t.checked?!(fieldValueCheckbox=!0)===fieldValueCheckbox&&""===e&&(c.classList.add("woocommerce-invalid"),s=!1,e=t):c.classList.remove("woocommerce-invalid"),"email"===o&&!1===/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r)||""===r?""===e&&(c.classList.add("woocommerce-invalid"),s=!1,e=t):c.classList.remove("woocommerce-invalid"),""!==e)&&!1===l&&(l=!0,e.focus())}}),s}function validateCheckoutInputs(){var e=document.querySelector(".ast-two-step-wrap form.woocommerce-checkout .woocommerce-billing-fields, .ast-two-step-wrap form.woocommerce-checkout .woocommerce-account-fields"),t=document.querySelector(".woocommerce-billing-fields__customer-info-wrapper"),o=document.querySelector(".ast-two-step-wrap form.woocommerce-checkout .woocommerce-shipping-fields"),c='input[type="text"], input[type="tel"], input[type="email"], input[type="password"], input[type="checkbox"], .select2';let r;if(t){let e;var s=document.querySelector("#ast-customer-login-url"),l=document.querySelector(".ast-create-account-section"),a=t.querySelector("#createaccount");(e=s&&s.classList.contains("active")?t.querySelectorAll("#billing_email, #billing_password"):astraAddon.is_registration_required&&l&&"block"===l.style.display||a&&a.checked?t.querySelectorAll("#billing_email, #account_username, #account_password"):t.querySelectorAll("#billing_email"))&&(r=r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(e)):e)}return e&&(r=r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(e.querySelectorAll(c))):e.querySelectorAll(c)),validateInputs(r=o&&(s=o.querySelector('h3#ship-to-different-address input[type="checkbox"]'))&&s.checked?r?Array.prototype.slice.call(r).concat(Array.prototype.slice.call(o.querySelectorAll(c))):o.querySelectorAll(c):r)}document.addEventListener("DOMContentLoaded",function(e){var t,o=document.querySelector("body");!astraAddon.cartflows_version&&o&&o.classList.contains("woocommerce-checkout")&&o.classList.contains("ast-woo-two-step-modern-checkout")&&(o=document.querySelectorAll(".ast-embed-checkout-form-steps .steps"),(t=document.querySelector(".ast-embed-checkout-form-nav-btns"))&&t.addEventListener("click",function(e){validateCheckoutInputs()&&twoStepModernCheckout(e)}),o)&&o.forEach(e=>{e.addEventListener("click",function(e){validateCheckoutInputs()&&twoStepModernCheckout(e)})})});